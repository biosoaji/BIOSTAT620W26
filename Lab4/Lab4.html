<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:6406/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Minyoung So">

<title>Lab4</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="./Lab4_files/clipboard.min.js"></script>
<script src="./Lab4_files/quarto.js"></script>
<script src="./Lab4_files/popper.min.js"></script>
<script src="./Lab4_files/tippy.umd.min.js"></script>
<script src="./Lab4_files/anchor.min.js"></script>
<link href="./Lab4_files/tippy.css" rel="stylesheet">
<link href="./Lab4_files/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./Lab4_files/bootstrap.min.js"></script>
<link href="./Lab4_files/bootstrap-icons.css" rel="stylesheet">
<link href="./Lab4_files/bootstrap-c0367b04c37547644fece4185067e4a7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<style>.ansi-display{font-family:monospace;white-space:pre-wrap;--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #00BC00;--ansiYellow: #949800;--ansiBlue: #0451a5;--ansiMagenta: #bc05bc;--ansiCyan: #0598bc;--ansiWhite: #555555;--ansiBrightBlack: #666666;--ansiBrightRed: #cd3131;--ansiBrightGreen: #14CE14;--ansiBrightYellow: #b5ba00;--ansiBrightBlue: #0451a5;--ansiBrightMagenta: #bc05bc;--ansiBrightCyan: #0598bc;--ansiBrightWhite: #a5a5a5}.dark-mode .ansi-display{--ansiBlack: #000000;--ansiRed: #cd3131;--ansiGreen: #0DBC79;--ansiYellow: #e5e510;--ansiBlue: #2472c8;--ansiMagenta: #bc3fbc;--ansiCyan: #11a8cd;--ansiWhite: #e5e5e5;--ansiBrightBlack: #666666;--ansiBrightRed: #f14c4c;--ansiBrightGreen: #23d18b;--ansiBrightYellow: #f5f543;--ansiBrightBlue: #3b8eea;--ansiBrightMagenta: #d670d6;--ansiBrightCyan: #29b8db;--ansiBrightWhite: #e5e5e5}@keyframes ansi-displaly-run-blink{50%{opacity:0}}.fui-FluentProvider h2{border-bottom:none;padding-bottom:0}</style><style data-make-styles-bucket="d" data-priority="0"></style><style id="fui-FluentProviderr0"></style></head>

<body class="fullcontent quarto-light" data-tabster="{&quot;root&quot;:{}}">

<i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Minyoung So </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:6406/#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="http://localhost:6406/#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="http://localhost:6406/#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats 1.0.1     ✔ stringr 1.6.0
✔ ggplot2 4.0.2     ✔ tibble  3.3.1
✔ purrr   1.2.1     ✔ tidyr   1.3.2
✔ readr   2.1.6     </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="http://localhost:6406/#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'

The following object is masked from 'package:purrr':

    transpose

The following objects are masked from 'package:lubridate':

    hour, isoweek, isoyear, mday, minute, month, quarter, second, wday,
    week, yday, year

The following objects are masked from 'package:dplyr':

    between, first, last</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="http://localhost:6406/#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-2"><a href="http://localhost:6406/#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'maps'

The following object is masked from 'package:purrr':

    map</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="http://localhost:6406/#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggforce)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="read-data" class="level2">
<h2 class="anchored" data-anchor-id="read-data">1. Read Data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#read-data" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="http://localhost:6406/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"covid_processed.csv"</span>))</span>
<span id="cb16-2"><a href="http://localhost:6406/#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(</span>
<span id="cb16-3"><a href="http://localhost:6406/#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">url =</span> <span class="st">"https://raw.githubusercontent.com/dmcable/BIOSTAT620W26/main/data/covid/covid_processed.csv"</span>,</span>
<span id="cb16-4"><a href="http://localhost:6406/#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">destfile =</span> <span class="st">"covid_processed.csv"</span>,</span>
<span id="cb16-5"><a href="http://localhost:6406/#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">method   =</span> <span class="st">"libcurl"</span>,</span>
<span id="cb16-6"><a href="http://localhost:6406/#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">timeout  =</span> <span class="dv">60</span></span>
<span id="cb16-7"><a href="http://localhost:6406/#cb16-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-8"><a href="http://localhost:6406/#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="http://localhost:6406/#cb16-9" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"/Users/smartso/Documents/B620/BIOSTAT620labs/BIOSTAT620W26/Lab4/covid_processed.csv"</span>)</span>
<span id="cb16-10"><a href="http://localhost:6406/#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X       date mmwr_year mmwr_week state state_name    pop region
1 1 2020-01-25      2020         4    AK     Alaska 732441     10
2 2 2020-02-01      2020         5    AK     Alaska 732441     10
3 3 2020-02-08      2020         6    AK     Alaska 732441     10
4 4 2020-02-15      2020         7    AK     Alaska 732441     10
5 5 2020-02-22      2020         8    AK     Alaska 732441     10
6 6 2020-02-29      2020         9    AK     Alaska 732441     10
        region_name cases hosp booster series deaths
1 Pacific Northwest     0    0       0      0      0
2 Pacific Northwest     0    0       0      0      0
3 Pacific Northwest     0    0       0      0      0
4 Pacific Northwest     0    0       0      0      0
5 Pacific Northwest     0    0       0      0      0
6 Pacific Northwest     0    0       0      0      0</code></pre>
</div>
</div>
</section>
<section id="prepare-the-data" class="level2">
<h2 class="anchored" data-anchor-id="prepare-the-data">2. Prepare the data<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#prepare-the-data" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="http://localhost:6406/#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pop-normalization ("units cases per 100,000 population") and date_object by ymd()</span></span>
<span id="cb18-2"><a href="http://localhost:6406/#cb18-2" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">&lt;-</span> <span class="fu">mutate</span>(covid,</span>
<span id="cb18-3"><a href="http://localhost:6406/#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">case_rate   =</span> cases   <span class="sc">/</span> pop <span class="sc">*</span> <span class="dv">100000</span>,</span>
<span id="cb18-4"><a href="http://localhost:6406/#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">hosp_rate    =</span> hosp    <span class="sc">/</span> pop <span class="sc">*</span> <span class="dv">100000</span>,</span>
<span id="cb18-5"><a href="http://localhost:6406/#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster_rate =</span> booster <span class="sc">/</span> pop <span class="sc">*</span> <span class="dv">100000</span>,</span>
<span id="cb18-6"><a href="http://localhost:6406/#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">series_rate  =</span> series  <span class="sc">/</span> pop <span class="sc">*</span> <span class="dv">100000</span>,</span>
<span id="cb18-7"><a href="http://localhost:6406/#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">death_rate  =</span> deaths  <span class="sc">/</span> pop <span class="sc">*</span> <span class="dv">100000</span>,</span>
<span id="cb18-8"><a href="http://localhost:6406/#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_object =</span> <span class="fu">ymd</span>(date)</span>
<span id="cb18-9"><a href="http://localhost:6406/#cb18-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-10"><a href="http://localhost:6406/#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean by state</span></span>
<span id="cb18-11"><a href="http://localhost:6406/#cb18-11" aria-hidden="true" tabindex="-1"></a>covid_state_mean <span class="ot">&lt;-</span> <span class="fu">summarize</span>(covid,</span>
<span id="cb18-12"><a href="http://localhost:6406/#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">case_rate   =</span> <span class="fu">mean</span>(case_rate,   <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-13"><a href="http://localhost:6406/#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">hosp_rate    =</span> <span class="fu">mean</span>(hosp_rate,    <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-14"><a href="http://localhost:6406/#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">booster_rate =</span> <span class="fu">mean</span>(booster_rate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-15"><a href="http://localhost:6406/#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">series_rate  =</span> <span class="fu">mean</span>(series_rate,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-16"><a href="http://localhost:6406/#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">death_rate  =</span> <span class="fu">mean</span>(death_rate,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-17"><a href="http://localhost:6406/#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop          =</span> <span class="fu">first</span>(pop),</span>
<span id="cb18-18"><a href="http://localhost:6406/#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">region       =</span> <span class="fu">first</span>(region),</span>
<span id="cb18-19"><a href="http://localhost:6406/#cb18-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> (state_name)</span>
<span id="cb18-20"><a href="http://localhost:6406/#cb18-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-21"><a href="http://localhost:6406/#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="http://localhost:6406/#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Logical variable</span></span>
<span id="cb18-23"><a href="http://localhost:6406/#cb18-23" aria-hidden="true" tabindex="-1"></a>covid_state_mean<span class="sc">$</span>pop_cat <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(covid_state_mean<span class="sc">$</span>pop <span class="sc">&gt;</span> <span class="fu">mean</span>(covid_state_mean<span class="sc">$</span>pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"High"</span>, <span class="st">"Low"</span>)</span>
<span id="cb18-24"><a href="http://localhost:6406/#cb18-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-25"><a href="http://localhost:6406/#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co">#Region is a factor</span></span>
<span id="cb18-26"><a href="http://localhost:6406/#cb18-26" aria-hidden="true" tabindex="-1"></a>covid_state_mean <span class="ot">&lt;-</span> <span class="fu">mutate</span> (covid_state_mean, </span>
<span id="cb18-27"><a href="http://localhost:6406/#cb18-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">as.factor</span>(region))</span>
<span id="cb18-28"><a href="http://localhost:6406/#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="http://localhost:6406/#cb18-29" aria-hidden="true" tabindex="-1"></a>covid_state_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             state_name case_rate hosp_rate booster_rate series_rate death_rate
1                Alaska 205.91649  7.101980    1671.9249    20995.62  1.2122358
2               Alabama 173.16538 14.774723     952.1307    14758.60  3.1151663
3              Arkansas 183.42199 13.431964    1185.7684    16491.10  2.9495620
4               Arizona 187.22787 12.837058    1387.5521    19637.05  3.0236537
5            California 136.13398  7.987460    1553.3896    21732.13  1.9293219
6              Colorado 161.30363  9.866618    1909.1093    21854.74  1.8516221
7           Connecticut 138.06359  8.065325    1811.0312    24636.25  2.4675444
8  District of Columbia 134.70206 11.286667    1838.7175    26530.01  2.0851435
9              Delaware 174.64851 10.301457    1513.6915    20748.37  2.0643138
10              Florida 177.88040 14.767187    1424.8965    20089.74  2.7139957
11              Georgia 164.74171 14.170055     977.6836    15655.33  2.4713702
12               Hawaii  73.40576  4.775660    1989.1007    23661.49  0.5810533
13                 Iowa 177.80850 10.147040    1749.2412    19836.12  2.4683376
14                Idaho 168.05845  8.739019    1244.0325    15818.74  2.1771550
15             Illinois 164.88819  9.417676    1640.4525    21188.50  2.1131482
16              Indiana 179.88469 12.617378    1271.0273    17660.67  2.7311197
17               Kansas 175.36921 11.858876    1403.9971    19478.00  2.3247989
18             Kentucky 191.64295 25.341167    1369.3153    17801.51  2.7981754
19            Louisiana 174.35346 11.908487    1097.5562    16567.25  2.9190674
20        Massachusetts 155.02964  6.303358    1701.9943    24114.73  2.1421487
21             Maryland 111.11726  8.480559    1753.0506    22830.72  1.9661991
22                Maine 105.21957  4.881999    2090.5727    24943.44  1.1646790
23             Michigan 168.39209 11.298186    1635.5762    19257.44  2.5764130
24            Minnesota 176.11956  7.520495    2027.6559    21947.57  1.8260540
25             Missouri 160.26489 12.100798    1236.6278    17440.85  2.6161405
26          Mississippi 180.67642 12.047059    1026.0514    15819.14  3.5867014
27              Montana 177.94011 17.829505    1608.4865    18105.31  2.6124093
28       North Carolina 157.61478  8.826196     919.5121    18666.34  2.1693629
29         North Dakota 219.91065 11.956314    1362.0486    17734.26  2.7875343
30             Nebraska 169.54116  9.456338    1674.9027    20064.50  1.9973827
31        New Hampshire 140.46157  6.299796    1404.0740    21995.57  1.2379358
32           New Jersey 159.68210  9.199553    1495.6187    22259.35  2.8604200
33           New Mexico 162.70732 11.525663    1828.4397    22599.48  2.9147024
34               Nevada 152.29772 12.785932    1088.0508    18028.30  2.7787612
35             New York  92.42285  8.980110    1368.0292    22668.60  1.4688463
36                 Ohio 166.00163 12.708210    1491.6561    18614.85  2.8170956
37             Oklahoma 174.52736 18.683541    1179.2524    17703.43  3.0983047
38               Oregon  97.57545  4.983954    1763.9010    21977.78  1.3054659
39         Pennsylvania 152.26660 10.654536    1461.6571    21225.98  2.8047838
40          Puerto Rico  73.77537  4.157634    1910.7782    24865.22  0.9279136
41         Rhode Island 199.48880  5.927047    1882.7298    24300.01  2.5710101
42       South Carolina 183.89504 10.559670    1233.5820    17071.67  2.8187481
43         South Dakota 198.31560 13.147385    1372.9251    19538.35  2.7247251
44            Tennessee 200.86308 11.591973    1322.6364    16422.26  2.9496639
45                Texas 152.91266 12.750948    1134.7323    17891.36  2.6864318
46                 Utah 189.38406  7.954618    1313.7775    18671.56  1.2368250
47             Virginia 124.62939  7.182198    1677.8711    22069.97  1.7349571
48              Vermont  94.39290  3.636955    2638.1138    25429.20  0.3381073
49           Washington 108.67804  4.590846    1725.1224    22257.95  1.2244230
50            Wisconsin 185.40802 13.559923    1799.0894    20804.83  1.9771537
51        West Virginia 180.56101 12.625780    1705.1841    19348.88  2.8447449
52              Wyoming 197.29449 13.754775    1336.7037    16406.96  2.1057919
        pop region pop_cat
1    732441     10     Low
2   5024803      4     Low
3   3012232      6     Low
4   7177986      9    High
5  39499738      9    High
6   5784308      8     Low
7   3600260      1     Low
8    690093      3     Low
9    991886      3     Low
10 21569932      4    High
11 10725800      4    High
12  1451911      9     Low
13  3188669      7     Low
14  1847772     10     Low
15 12785245      5    High
16  6785644      5    High
17  2935880      7     Low
18  4503958      4     Low
19  4651203      6     Low
20  7022220      1    High
21  6172679      3     Low
22  1362280      1     Low
23 10067664      5    High
24  5707165      5     Low
25  6154481      7     Low
26  2956870      4     Low
27  1086193      8     Low
28 10457177      4    High
29   778962      8     Low
30  1961455      7     Low
31  1377848      1     Low
32  9279743      2    High
33  2117566      6     Low
34  3114071      9     Low
35 20154933      2    High
36 11790587      5    High
37  3962031      6     Low
38  4241544     10     Low
39 12989625      3    High
40  3281538      2     Low
41  1096229      1     Low
42  5130729      4     Low
43   887099      8     Low
44  6920119      4    High
45 29217653      6    High
46  3281684      8     Low
47  8632044      3    High
48   642495      1     Low
49  7718785     10    High
50  5892323      5     Low
51  1789798      3     Low
52   577267      8     Low</code></pre>
</div>
</div>
</section>
<section id="use-geom_violin---case-rates-and-death-rates-by-region" class="level2">
<h2 class="anchored" data-anchor-id="use-geom_violin---case-rates-and-death-rates-by-region">3. Use geom_violin - case rates and death rates by region<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#use-geom_violin---case-rates-and-death-rates-by-region" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Overall, the violin plots of case rates by region show patterns similar to those of death rates. For case rates, Regions 4, 5, 6, 7, and 8 exhibit relatively narrow distributions with long upper tails, indicating that some states in these regions experienced particularly high case rates (exceeding 150 cases per 100,000 population). In contrast, Regions 1, 2, 3, 9, and 10 display broader distributions, suggesting greater variability in case rates across states. For death rates, Regions 4 and 6 stand out with higher central values and relatively low variability, indicating consistently high death rates across states within these regions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="http://localhost:6406/#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covid_state_mean) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="http://localhost:6406/#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span> (<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> case_rate, <span class="at">fill =</span> region)) <span class="sc">+</span> </span>
<span id="cb20-3"><a href="http://localhost:6406/#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#labs (title = "Case Rates by Region")</span></span>
<span id="cb20-4"><a href="http://localhost:6406/#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span> (<span class="sc">~</span>region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="http://localhost:6406/#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covid_state_mean) <span class="sc">+</span> </span>
<span id="cb21-2"><a href="http://localhost:6406/#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span> (<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> death_rate, <span class="at">fill =</span> region)) <span class="sc">+</span> </span>
<span id="cb21-3"><a href="http://localhost:6406/#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span> (<span class="sc">~</span>region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="use-geom_point-with-stat_smooth---the-association-between-time-and-case-rates-by-region" class="level2">
<h2 class="anchored" data-anchor-id="use-geom_point-with-stat_smooth---the-association-between-time-and-case-rates-by-region">4. Use geom_point with stat_smooth - the association between time and case rates by region<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#use-geom_point-with-stat_smooth---the-association-between-time-and-case-rates-by-region" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>The scatterplot with smoothers reveals clear temporal trends in COVID-19 case rates, with repeated rises and falls. The LOESS smoother captures these nonlinear patterns more effectively than a linear model, which fails to represent the timing and magnitude of peaks. Regional differences are not clearly distinguishable; using distinct colors for each region rather than a gradient may improve regional comparison.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="http://localhost:6406/#cb22-1" aria-hidden="true" tabindex="-1"></a>covid_ex2w <span class="ot">&lt;-</span><span class="fu">filter</span>(covid,</span>
<span id="cb22-2"><a href="http://localhost:6406/#cb22-2" aria-hidden="true" tabindex="-1"></a>  mmwr_week <span class="sc">&gt;</span> <span class="dv">2</span> </span>
<span id="cb22-3"><a href="http://localhost:6406/#cb22-3" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb22-4"><a href="http://localhost:6406/#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covid_ex2w) <span class="sc">+</span> </span>
<span id="cb22-5"><a href="http://localhost:6406/#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> date_object, <span class="at">y =</span> case_rate, <span class="at">color =</span> region, <span class="at">group =</span> region) <span class="sc">+</span></span>
<span id="cb22-6"><a href="http://localhost:6406/#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Association between case rate and region by default method"</span>) <span class="sc">+</span></span>
<span id="cb22-7"><a href="http://localhost:6406/#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span> (<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb22-8"><a href="http://localhost:6406/#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">span =</span> <span class="fl">0.4</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># Without the loess method span doesn't work.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="http://localhost:6406/#cb24-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#theme_minimal()</span></span>
<span id="cb24-2"><a href="http://localhost:6406/#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="http://localhost:6406/#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> covid_ex2w) <span class="sc">+</span> </span>
<span id="cb24-4"><a href="http://localhost:6406/#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> date_object, <span class="at">y =</span> case_rate, <span class="at">color =</span> region, <span class="at">group =</span> region) <span class="sc">+</span></span>
<span id="cb24-5"><a href="http://localhost:6406/#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Association between case rate and region by linear regression method"</span>) <span class="sc">+</span></span>
<span id="cb24-6"><a href="http://localhost:6406/#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span> (<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb24-7"><a href="http://localhost:6406/#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="http://localhost:6406/#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="use-geom_bar---the-states-by-population-category-colored-by-region" class="level2">
<h2 class="anchored" data-anchor-id="use-geom_bar---the-states-by-population-category-colored-by-region">5. Use geom_bar - the states by population category colored by region<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#use-geom_bar---the-states-by-population-category-colored-by-region" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>The barplot displays the number of states in each population category (high vs.&nbsp;low) by region. Regions 2 and 5 contain more high-population states, whereas most other regions have an equal or greater number of low-population states. The side-by-side bars and color coding for each region facilitate comparison across regions. However, a binary population category may be less informative for epidemiological analysis of COVID-19 than a population density–based classification.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="http://localhost:6406/#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_state_mean, <span class="fu">aes</span>(<span class="at">x =</span> pop_cat, <span class="at">fill =</span> region)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="http://localhost:6406/#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb26-3"><a href="http://localhost:6406/#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span>  <span class="co"># change colors</span></span>
<span id="cb26-4"><a href="http://localhost:6406/#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-5"><a href="http://localhost:6406/#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Population Category"</span>,</span>
<span id="cb26-6"><a href="http://localhost:6406/#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of States"</span>,</span>
<span id="cb26-7"><a href="http://localhost:6406/#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Number of States by Population Category and Region"</span>,</span>
<span id="cb26-8"><a href="http://localhost:6406/#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Region"</span></span>
<span id="cb26-9"><a href="http://localhost:6406/#cb26-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb26-10"><a href="http://localhost:6406/#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="use-stat_summary---mean-vaccination-rate-and-death-rate-by-region-with-standard-deviation-error-bars" class="level2">
<h2 class="anchored" data-anchor-id="use-stat_summary---mean-vaccination-rate-and-death-rate-by-region-with-standard-deviation-error-bars">6. Use stat_summary - mean vaccination rate and death rate by region with standard deviation error bars<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#use-stat_summary---mean-vaccination-rate-and-death-rate-by-region-with-standard-deviation-error-bars" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Vaccination rates Vaccination rates are vary, and mean vaccination rates range from approximately 15,000 to 25,000 per 100,000 population across regions. Regions 1 and 2 show relatively high mean vaccination rates with low standard deviations, indicating similar vaccination coverage across states within these regions. In contrast, Region 4 where we previously identified as having high case and death rates has the lowest mean vaccination rate, suggesting weaker primary prevention compared with other regions. Interestingly, Region 5, which includes Michigan, shows relatively higher vaccination coverage compared with neighboring regions.</p>
<p>Death rates Death rates are less vary than vaccination rates and mean death rates range from approximately 1 to 3 per 100,000 population across regions. Overall, regional mean death rates show an inverse relationship with vaccination rates, highlighting the importance of vaccination as a primary prevention strategy. Although regions with higher vaccination coverage tend to have lower mean death rates, the wide standard deviation error bars indicate substantial variability between states, suggesting that factors beyond vaccination also influence mortality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="http://localhost:6406/#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_state_mean, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> series_rate, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="http://localhost:6406/#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb27-3"><a href="http://localhost:6406/#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,       <span class="co"># mean +- SD</span></span>
<span id="cb27-4"><a href="http://localhost:6406/#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),   <span class="co"># SD multiplier; Default is 2SD.</span></span>
<span id="cb27-5"><a href="http://localhost:6406/#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb27-6"><a href="http://localhost:6406/#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#size = 3                    # Default format</span></span>
<span id="cb27-7"><a href="http://localhost:6406/#cb27-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-8"><a href="http://localhost:6406/#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb27-9"><a href="http://localhost:6406/#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,</span>
<span id="cb27-10"><a href="http://localhost:6406/#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb27-11"><a href="http://localhost:6406/#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"errorbar"</span>,</span>
<span id="cb27-12"><a href="http://localhost:6406/#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#width = 0.2</span></span>
<span id="cb27-13"><a href="http://localhost:6406/#cb27-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-14"><a href="http://localhost:6406/#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-15"><a href="http://localhost:6406/#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Region"</span>,</span>
<span id="cb27-16"><a href="http://localhost:6406/#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Vaccination Rate per 100,000"</span>,</span>
<span id="cb27-17"><a href="http://localhost:6406/#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Vaccination Rate by Region"</span></span>
<span id="cb27-18"><a href="http://localhost:6406/#cb27-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-19"><a href="http://localhost:6406/#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="http://localhost:6406/#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_state_mean, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> death_rate, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="http://localhost:6406/#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb28-3"><a href="http://localhost:6406/#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,</span>
<span id="cb28-4"><a href="http://localhost:6406/#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb28-5"><a href="http://localhost:6406/#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb28-6"><a href="http://localhost:6406/#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb28-7"><a href="http://localhost:6406/#cb28-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-8"><a href="http://localhost:6406/#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb28-9"><a href="http://localhost:6406/#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,</span>
<span id="cb28-10"><a href="http://localhost:6406/#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb28-11"><a href="http://localhost:6406/#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"errorbar"</span>,</span>
<span id="cb28-12"><a href="http://localhost:6406/#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span></span>
<span id="cb28-13"><a href="http://localhost:6406/#cb28-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-14"><a href="http://localhost:6406/#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-15"><a href="http://localhost:6406/#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Region"</span>,</span>
<span id="cb28-16"><a href="http://localhost:6406/#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Death Rate per 100,000"</span>,</span>
<span id="cb28-17"><a href="http://localhost:6406/#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Death Rate by Region"</span></span>
<span id="cb28-18"><a href="http://localhost:6406/#cb28-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-19"><a href="http://localhost:6406/#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-map-showing-the-spatial-trend-in-covid-deaths-in-the-us" class="level2">
<h2 class="anchored" data-anchor-id="a-map-showing-the-spatial-trend-in-covid-deaths-in-the-us">7. A map showing the spatial trend in COVID deaths in the US<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#a-map-showing-the-spatial-trend-in-covid-deaths-in-the-us" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>Observations COVID-19 death rates do not vary substantially across most U.S. states, with the notable exception of Vermont. As shown in the map, the majority of states have death rates between 1 and 3 per 100,000 population. A few states stand out, particularly Vermont and Mississippi. Vermont has the lowest death rate, while Mississippi has the highest, which is easily distinguishable by color.</p>
<p>Trend There is no strong or obvious geographic pattern in COVID-19 death rates across the United States. However, among the top 10 states with the highest death rates (marked with yellow stars), these states tend to be located more in the South than in the North and are more likely to be rural rather than highly urbanized. In addition, states on the West Coast generally exhibit relatively lower death rates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="http://localhost:6406/#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Get US states map data</span></span>
<span id="cb29-2"><a href="http://localhost:6406/#cb29-2" aria-hidden="true" tabindex="-1"></a>us_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb29-3"><a href="http://localhost:6406/#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="http://localhost:6406/#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Prepare your COVID data</span></span>
<span id="cb29-5"><a href="http://localhost:6406/#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes 'covid_state_mean' exists with columns: 'state', 'death_rate'</span></span>
<span id="cb29-6"><a href="http://localhost:6406/#cb29-6" aria-hidden="true" tabindex="-1"></a>covid_state_mean <span class="ot">&lt;-</span> covid_state_mean <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="http://localhost:6406/#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_lower =</span> <span class="fu">tolower</span>(state_name))</span>
<span id="cb29-8"><a href="http://localhost:6406/#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="http://localhost:6406/#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Merge map data with COVID data</span></span>
<span id="cb29-10"><a href="http://localhost:6406/#cb29-10" aria-hidden="true" tabindex="-1"></a>map_covid <span class="ot">&lt;-</span> <span class="fu">left_join</span>(us_map, covid_state_mean, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"region"</span> <span class="ot">=</span> <span class="st">"state_lower"</span>))</span>
<span id="cb29-11"><a href="http://localhost:6406/#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="http://localhost:6406/#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Identify top 10 states for labeling</span></span>
<span id="cb29-13"><a href="http://localhost:6406/#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co"># We calculate the center of each state to know where to put the "*"</span></span>
<span id="cb29-14"><a href="http://localhost:6406/#cb29-14" aria-hidden="true" tabindex="-1"></a>state_centers <span class="ot">&lt;-</span> us_map <span class="sc">%&gt;%</span></span>
<span id="cb29-15"><a href="http://localhost:6406/#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span></span>
<span id="cb29-16"><a href="http://localhost:6406/#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">long =</span> <span class="fu">mean</span>(long), <span class="at">lat =</span> <span class="fu">mean</span>(lat))</span>
<span id="cb29-17"><a href="http://localhost:6406/#cb29-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="http://localhost:6406/#cb29-18" aria-hidden="true" tabindex="-1"></a>top10 <span class="ot">&lt;-</span> covid_state_mean <span class="sc">%&gt;%</span></span>
<span id="cb29-19"><a href="http://localhost:6406/#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(death_rate)) <span class="sc">%&gt;%</span></span>
<span id="cb29-20"><a href="http://localhost:6406/#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-21"><a href="http://localhost:6406/#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(state_centers, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_lower"</span> <span class="ot">=</span> <span class="st">"region"</span>))</span>
<span id="cb29-22"><a href="http://localhost:6406/#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="http://localhost:6406/#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Create the map</span></span>
<span id="cb29-24"><a href="http://localhost:6406/#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_covid, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb29-25"><a href="http://localhost:6406/#cb29-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Polygon layer merged with COVID data</span></span>
<span id="cb29-26"><a href="http://localhost:6406/#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> death_rate), <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb29-27"><a href="http://localhost:6406/#cb29-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-28"><a href="http://localhost:6406/#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add * labels for top 10 states</span></span>
<span id="cb29-29"><a href="http://localhost:6406/#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># group = NULL is required here so it doesn't try to group by state polygon</span></span>
<span id="cb29-30"><a href="http://localhost:6406/#cb29-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> top10, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">label =</span> <span class="st">"*"</span>, <span class="at">group =</span> <span class="cn">NULL</span>), </span>
<span id="cb29-31"><a href="http://localhost:6406/#cb29-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"yellow"</span>, </span>
<span id="cb29-32"><a href="http://localhost:6406/#cb29-32" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">6</span>,</span>
<span id="cb29-33"><a href="http://localhost:6406/#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">#          vjust = 0.7 # Slight vertical adjustment to center the asterisk</span></span>
<span id="cb29-34"><a href="http://localhost:6406/#cb29-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-35"><a href="http://localhost:6406/#cb29-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-36"><a href="http://localhost:6406/#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Custom color palette</span></span>
<span id="cb29-37"><a href="http://localhost:6406/#cb29-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"lightyellow"</span>, <span class="at">high =</span> <span class="st">"#800026"</span>, <span class="at">name =</span> <span class="st">"Death per 100K"</span>, <span class="at">na.value =</span> <span class="st">"grey90"</span>) <span class="sc">+</span></span>
<span id="cb29-38"><a href="http://localhost:6406/#cb29-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-39"><a href="http://localhost:6406/#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appropriate aspect ratio</span></span>
<span id="cb29-40"><a href="http://localhost:6406/#cb29-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb29-41"><a href="http://localhost:6406/#cb29-41" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb29-42"><a href="http://localhost:6406/#cb29-42" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb29-43"><a href="http://localhost:6406/#cb29-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Labels</span></span>
<span id="cb29-44"><a href="http://localhost:6406/#cb29-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">#theme_void() + # Removes axes, background grid, and ticks</span></span>
<span id="cb29-45"><a href="http://localhost:6406/#cb29-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"US COVID Death Rates"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="use-a-ggplot-extension" class="level2">
<h2 class="anchored" data-anchor-id="use-a-ggplot-extension">8. Use a ggplot extension<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:6406/#use-a-ggplot-extension" style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; padding-right: 0.1875em; padding-left: 0.1875em;"></a></h2>
<p>I used ggforce to plot death rates versus vaccination rates by region, with individual states represented as dots and grouped by regions with colors. This visualization shows the approximate association between vaccination coverage and death rates within each region, while also highlighting variability among states in a Region. Interestingly, within regions, differences in vaccination coverage did not consistently correspond to lower death rates; positive, negative, and negligible effects were all observed. However, when ignoring regional grouping, the overall trend across all states shows an inverse relationship between vaccination rates and death rates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="http://localhost:6406/#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_state_mean,</span>
<span id="cb30-2"><a href="http://localhost:6406/#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> death_rate,</span>
<span id="cb30-3"><a href="http://localhost:6406/#cb30-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> series_rate,</span>
<span id="cb30-4"><a href="http://localhost:6406/#cb30-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb30-5"><a href="http://localhost:6406/#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb30-6"><a href="http://localhost:6406/#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_mark_ellipse</span>(<span class="fu">aes</span>(<span class="at">group =</span> region, <span class="at">fill =</span> region),</span>
<span id="cb30-7"><a href="http://localhost:6406/#cb30-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">alpha =</span> <span class="fl">0.15</span>,</span>
<span id="cb30-8"><a href="http://localhost:6406/#cb30-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expand =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb30-9"><a href="http://localhost:6406/#cb30-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-10"><a href="http://localhost:6406/#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="http://localhost:6406/#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>) <span class="sc">+</span></span>
<span id="cb30-12"><a href="http://localhost:6406/#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-13"><a href="http://localhost:6406/#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"COVID Case and Vaccination Rates by Region"</span>,</span>
<span id="cb30-14"><a href="http://localhost:6406/#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Case rate (per 100,000)"</span>,</span>
<span id="cb30-15"><a href="http://localhost:6406/#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean vaccination rate (per 100,000)"</span>,</span>
<span id="cb30-16"><a href="http://localhost:6406/#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Region"</span></span>
<span id="cb30-17"><a href="http://localhost:6406/#cb30-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-18"><a href="http://localhost:6406/#cb30-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I separated #4 Time Series Graph and plotted case rates over time using the ggforce package. This visualization clearly highlights differences between regions, making regional trends more apparent than in the time series plots of ggplot2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="http://localhost:6406/#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(covid_ex2w,</span>
<span id="cb31-2"><a href="http://localhost:6406/#cb31-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> date_object,</span>
<span id="cb31-3"><a href="http://localhost:6406/#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> case_rate,</span>
<span id="cb31-4"><a href="http://localhost:6406/#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb31-5"><a href="http://localhost:6406/#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb31-6"><a href="http://localhost:6406/#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">span =</span> <span class="fl">0.4</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb31-7"><a href="http://localhost:6406/#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap_paginate</span>(<span class="sc">~</span> region, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb31-8"><a href="http://localhost:6406/#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-9"><a href="http://localhost:6406/#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"COVID-19 Case Rates Over Time by Region"</span>,</span>
<span id="cb31-10"><a href="http://localhost:6406/#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb31-11"><a href="http://localhost:6406/#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Case rate (per 100,000)"</span>,</span>
<span id="cb31-12"><a href="http://localhost:6406/#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Region"</span></span>
<span id="cb31-13"><a href="http://localhost:6406/#cb31-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb31-14"><a href="http://localhost:6406/#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="./Lab4_files/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->





<script>window.backupDefine = window.define; window.define = undefined;</script>
<script type="text/javascript" src="./Lab4_files/quarto-preview.js"></script>
<script>window.define = window.backupDefine; window.backupDefine = undefined;</script>
<script type="text/javascript">
  const options = {
    origin: "",
    search: "",
    inputFile: "/Users/smartso/Downloads/Lab4_So.qmd",
    isPresentation: false
  }
  document.addEventListener("DOMContentLoaded", function () {
    window.QuartoPreview.init(options);
  });
</script>
<div><div dir="ltr" class="fui-FluentProvider fui-FluentProviderr0 ___jdtuxv0 f19n0e5 fxugw4r f1o700av fk6fouc fkhj508 figsok6 f1i3iumi"></div></div><i tabindex="0" role="none" data-tabster-dummy="" aria-hidden="true" style="position: fixed; height: 1px; width: 1px; opacity: 0.001; z-index: -1; content-visibility: hidden; top: 0px; left: 0px;"></i></body></html>